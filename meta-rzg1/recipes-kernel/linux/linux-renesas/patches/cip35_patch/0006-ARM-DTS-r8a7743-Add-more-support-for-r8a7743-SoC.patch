From 4547ed84ef6e6ef00994ad0e82d7b768bc2f9c44 Mon Sep 17 00:00:00 2001
From: TraHT <traht@fsoft.com.vn>
Date: Mon, 7 Jan 2019 15:23:22 +0700
Subject: [PATCH 006/628] ARM: DTS: r8a7743: Add more support for r8a7743 SoC

Signed-off-by: vietn <vietn@fsoft.com.vn>
Signed-off-by: Nguyen Van Linh [FGA.BU13] <LinhNV25@fsoft.com.vn>
Signed-off-by: vietn <vietn@fsoft.com.vn>
Signed-off-by: thongsyho <thong.ho.px@rvc.renesas.com>
Signed-off-by: Nguyen Van Tu [FGA.AIS] <TuNV16@fsoft.com.vn>

Signed-off-by: TraHT <traht@fsoft.com.vn>
---
 arch/arm/boot/dts/r8a7743.dtsi | 133 ++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 132 insertions(+), 1 deletion(-)

diff --git a/arch/arm/boot/dts/r8a7743.dtsi b/arch/arm/boot/dts/r8a7743.dtsi
index 9ea92a3..b08a1bf 100644
--- a/arch/arm/boot/dts/r8a7743.dtsi
+++ b/arch/arm/boot/dts/r8a7743.dtsi
@@ -12,9 +12,11 @@
 #include <dt-bindings/interrupt-controller/irq.h>
 #include <dt-bindings/interrupt-controller/arm-gic.h>
 #include <dt-bindings/clock/r8a7743-clock.h>
+#include <dt-bindings/power/r8a7743-sysc.h>
 
 / {
 	compatible = "renesas,r8a7743";
+	interrupt-parent = <&gic>;
 	#address-cells = <2>;
 	#size-cells = <2>;
 
@@ -47,9 +49,11 @@
 			compatible = "arm,cortex-a15";
 			reg = <0>;
 			clock-frequency = <1500000000>;
+			voltage-tolerance = <1>; /* 1% */
 			clocks = <&cpg_clocks R8A7743_CLK_Z>;
 			clock-latency = <300000>; /* 300 us */
 			next-level-cache = <&L2_CA15>;
+			power-domains = <&sysc R8A7743_PD_CA15_CPU0>;
 
 			/* kHz - uV - OPPs unknown yet */
 			operating-points = <1500000 1000000>,
@@ -68,6 +72,7 @@
 			clocks = <&cpg_clocks R8A7743_CLK_Z>;
 			clock-latency = <300000>; /* 300 us */
 			next-level-cache = <&L2_CA15>;
+			power-domains = <&sysc R8A7743_PD_CA15_CPU1>;
 
 			/* kHz - uV - OPPs unknown yet */
 			operating-points = <1500000 1000000>,
@@ -1082,6 +1087,24 @@
 			status = "disabled";
 		};
 
+		sata0: sata@ee300000 {
+			compatible = "renesas,sata-r8a7743";
+			reg = <0 0xee300000 0 0x2000>;
+			interrupts = <0 105 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&mstp8_clks R8A7743_CLK_SATA0>;
+			power-domains = <&cpg_clocks>;
+			status = "disabled";
+		};
+
+		sata1: sata@ee500000 {
+			compatible = "renesas,sata-r8a7743";
+			reg = <0 0xee500000 0 0x2000>;
+			interrupts = <0 106 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&mstp8_clks R8A7743_CLK_SATA1>;
+			power-domains = <&cpg_clocks>;
+			status = "disabled";
+		};
+
 		clocks {
 			#address-cells = <2>;
 			#size-cells = <2>;
@@ -1099,7 +1122,20 @@
 						     "sdh", "sd0", "z", "rcan";
 				#power-domain-cells = <0>;
 			};
-
+			ssp_clk: ssp_clk@e6150248 {
+				compatible = "renesas,r8a7743-div6-clock", "renesas,cpg-div6-clock";
+				reg = <0 0xe6150248 0 4>;
+				clocks = <&pll1_div2_clk>;
+				#clock-cells = <0>;
+				clock-output-names = "ssp";
+			};
+			ssprs_clk: ssprs_clk@e615024c {
+				compatible = "renesas,r8a7743-div6-clock", "renesas,cpg-div6-clock";
+				reg = <0 0xe615024c 0 4>;
+				clocks = <&pll1_div2_clk>;
+				#clock-cells = <0>;
+				clock-output-names = "ssprs";
+			};
 			/* Variable factor clocks */
 			sd2_clk: sd2_clk@e6150078 {
 				compatible = "renesas,r8a7743-div6-clock",
@@ -1167,6 +1203,14 @@
 				clock-mult = <1>;
 				clock-output-names = "hp";
 			};
+			i_clk: i_clk {
+				compatible = "fixed-factor-clock";
+				clocks = <&cpg_clocks R8A7743_CLK_PLL1>;
+				#clock-cells = <0>;
+				clock-div = <2>;
+				clock-mult = <1>;
+				clock-output-names = "i";
+			};
 			b_clk: b_clk {
 				compatible = "fixed-factor-clock";
 				clocks = <&cpg_clocks R8A7743_CLK_PLL1>;
@@ -1199,6 +1243,14 @@
 				clock-mult = <1>;
 				clock-output-names = "m2";
 			};
+			imp_clk: imp_clk {
+				compatible = "fixed-factor-clock";
+				clocks = <&cpg_clocks R8A7743_CLK_PLL1>;
+				#clock-cells = <0>;
+				clock-div = <4>;
+				clock-mult = <1>;
+				clock-output-names = "imp";
+			};
 			rclk_clk: rclk_clk {
 				compatible = "fixed-factor-clock";
 				clocks = <&cpg_clocks R8A7743_CLK_PLL1>;
@@ -1515,6 +1567,12 @@
 			};
 		};
 
+		sysc: system-controller@e6180000 {
+			compatible = "renesas,r8a7743-sysc";
+			reg = <0 0xe6180000 0 0x0200>;
+			#power-domain-cells = <1>;
+		};
+
 		hsusb: usb@e6590000 {
 			compatible = "renesas,usbhs-r8a7743",
 				     "renesas,rcar-gen2-usbhs";
@@ -1680,6 +1738,17 @@
 			renesas,#wpf = <1>;
 		};
 
+		sgx@fd800000 {
+			compatible = "renesas,sgx";
+			reg = <0 0xfd800000 0 0x10000>;
+			interrupts = <0 119 IRQ_TYPE_LEVEL_HIGH>;
+			interrupt-names = "irq_sgx";
+			clocks = <&mstp1_clks R8A7743_CLK_3DG>,
+				<&mstp8_clks R8A7743_CLK_IPMMU_SGX>;
+			clock-names = "sgx_clk", "ipmmu_clk";
+			power-domains = <&sysc R8A7743_PD_SGX>;
+		};
+
 		pci0: pci@ee090000 {
 			compatible = "renesas,pci-r8a7743",
 				     "renesas,pci-rcar-gen2";
@@ -1706,12 +1775,14 @@
 
 			usb@1,0 {
 				reg = <0x800 0 0 0 0>;
+				device_type = "pci";
 				phys = <&usb0 0>;
 				phy-names = "usb";
 			};
 
 			usb@2,0 {
 				reg = <0x1000 0 0 0 0>;
+				device_type = "pci";
 				phys = <&usb0 0>;
 				phy-names = "usb";
 			};
@@ -1817,6 +1888,66 @@
 			status = "disabled";
 		};
 
+		ipmmu_sy0: mmu@e6280000 {
+			compatible = "renesas,ipmmu-vmsa";
+			reg = <0 0xe6280000 0 0x1000>;
+			interrupts = <0 223 IRQ_TYPE_LEVEL_HIGH>,
+				     <0 224 IRQ_TYPE_LEVEL_HIGH>;
+			#iommu-cells = <1>;
+			status = "disabled";
+		};
+
+		ipmmu_sy1: mmu@e6290000 {
+			compatible = "renesas,ipmmu-vmsa";
+			reg = <0 0xe6290000 0 0x1000>;
+			interrupts = <0 225 IRQ_TYPE_LEVEL_HIGH>;
+			#iommu-cells = <1>;
+			status = "disabled";
+		};
+
+		ipmmu_ds: mmu@e6740000 {
+			compatible = "renesas,ipmmu-vmsa";
+			reg = <0 0xe6740000 0 0x1000>;
+			interrupts = <0 198 IRQ_TYPE_LEVEL_HIGH>,
+				     <0 199 IRQ_TYPE_LEVEL_HIGH>;
+			#iommu-cells = <1>;
+			status = "disabled";
+		};
+
+		ipmmu_mp: mmu@ec680000 {
+			compatible = "renesas,ipmmu-vmsa";
+			reg = <0 0xec680000 0 0x1000>;
+			interrupts = <0 226 IRQ_TYPE_LEVEL_HIGH>;
+			#iommu-cells = <1>;
+			status = "disabled";
+		};
+
+		ipmmu_mx: mmu@fe951000 {
+			compatible = "renesas,ipmmu-vmsa";
+			reg = <0 0xfe951000 0 0x1000>;
+			interrupts = <0 222 IRQ_TYPE_LEVEL_HIGH>,
+				     <0 221 IRQ_TYPE_LEVEL_HIGH>;
+			#iommu-cells = <1>;
+			status = "disabled";
+		};
+
+		ipmmu_rt: mmu@ffc80000 {
+			compatible = "renesas,ipmmu-vmsa";
+			reg = <0 0xffc80000 0 0x1000>;
+			interrupts = <0 307 IRQ_TYPE_LEVEL_HIGH>;
+			#iommu-cells = <1>;
+			status = "disabled";
+		};
+
+		ipmmu_gp: mmu@e62a0000 {
+			compatible = "renesas,ipmmu-vmsa";
+			reg = <0 0xe62a0000 0 0x1000>;
+			interrupts = <0 260 IRQ_TYPE_LEVEL_HIGH>,
+				     <0 261 IRQ_TYPE_LEVEL_HIGH>;
+			#iommu-cells = <1>;
+			status = "disabled";
+		};
+
 		rcar_sound: sound@ec500000 {
 			/*
 			 * #sound-dai-cells is required
-- 
2.7.4

